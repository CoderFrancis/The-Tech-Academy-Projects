(window.editorJsonp=window.editorJsonp||[]).push([[119],{"26rN":function(e,t){function n(e){if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(e){BOOMR.isCrossOriginError(e)||BOOMR.addError(e,"BOOMR_check_doc_domain.domainFix")}e=document.domain}if(-1!==e.indexOf(".")){try{return void window.parent.document}catch(t){document.domain=e}try{return void window.parent.document}catch(t){e=e.replace(/^[\w\-]+\./,"")}n(e)}}var i,r,o,a,s,u,d,l,c,p,O,f,h,m,v,g,R;window.BOOMR_start=(new Date).getTime(),n(),i=window,O=i,i.parent!==i&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(i=i.parent,s=document.getElementById("boomr-if-as").src),a=i.document,i.BOOMR||(i.BOOMR={}),BOOMR=i.BOOMR,BOOMR.version||(BOOMR.version="0.9",BOOMR.window=i,BOOMR.boomerang_frame=O,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new i.CustomEvent("CustomEvent")&&(u=function(e,t){return new i.CustomEvent(e,t)})}catch(e){}try{!u&&a.createEvent&&a.createEvent("CustomEvent")&&(u=function(e,t){var n=a.createEvent("CustomEvent");return t=t||{cancelable:!1,bubbles:!1},n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n})}catch(e){}!u&&a.createEventObject&&(u=function(e,t){var n=a.createEventObject();return n.type=n.propertyName=e,n.detail=t.detail,n}),u||(u=function(){})}(),d=function(e,t,n){var i=u(e,{detail:t});function r(){a.dispatchEvent?a.dispatchEvent(i):a.fireEvent&&a.fireEvent("onpropertychange",i)}i&&(n?BOOMR.setImmediate(r):r())},void 0!==document.hidden?(l="visibilityState",c="visibilitychange"):void 0!==document.mozHidden?(l="mozVisibilityState",c="mozvisibilitychange"):void 0!==document.msHidden?(l="msVisibilityState",c="msvisibilitychange"):void 0!==document.webkitHidden&&(l="webkitVisibilityState",c="webkitvisibilitychange"),r={beacon_url:"",beacon_type:"AUTO",site_domain:i.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),
//! User's ip address determined on the server.  Used for the BA cookie
user_ip:"",autorun:!0,strip_query_string:!1,onloadfired:!1,handlers_attached:!1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(e){return function(t){var n;t||(t=i.event),t.target?n=t.target:t.srcElement&&(n=t.srcElement),3===n.nodeType&&(n=n.parentNode),n&&"OBJECT"===n.nodeName.toUpperCase()&&"application/x-shockwave-flash"===n.type||r.fireEvent(e,n)}},fireEvent:function(e,t){var n,i,r;if(e=e.toLowerCase(),this.events.hasOwnProperty(e))for(this.public_events.hasOwnProperty(e)&&d(this.public_events[e],t),r=this.events[e],n=0;n<r.length;n++)try{(i=r[n]).fn.call(i.scope,t,i.cb_data)}catch(t){BOOMR.addError(t,"fireEvent."+e+"<"+n+">")}}},o={t_lstart:null,t_start:BOOMR_start,t_end:null,
//! t_pload: Value of the BOOMR_onload set in the host page
t_onload:void 0,url:s,utils:{objectToString:function(e,t,n){var i,r=[];if(!e||"object"!=typeof e)return e;if(void 0===t&&(t="\n\t"),n||(n=0),"[object Array]"===Object.prototype.toString.call(e)){for(i=0;i<e.length;i++)n>0&&null!==e[i]&&"object"==typeof e[i]?r.push(this.objectToString(e[i],t+("\n\t"===t?"\t":""),n-1)):"&"===t?r.push(encodeURIComponent(e[i])):r.push(e[i]);t=","}else for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n>0&&null!==e[i]&&"object"==typeof e[i]?r.push(encodeURIComponent(i)+"="+this.objectToString(e[i],t+("\n\t"===t?"\t":""),n-1)):"&"===t?r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i])):r.push(i+"="+e[i]));return r.join(t)},getCookie:function(e){return e?(e=" "+e+"=",(t=(n=" "+a.cookie+";").indexOf(e))>=0?(t+=e.length,n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):null):null;var t,n},setCookie:function(e,t,n){var i,o,s,u,d;if(!e||!r.site_domain)return BOOMR.debug("No cookie name or site domain: "+e+"/"+r.site_domain),!1;if(u=[o=e+'="'+(i=this.objectToString(t,"&"))+'"',"path=/","domain="+r.site_domain],n&&((d=new Date).setTime(d.getTime()+1e3*n),d=d.toGMTString(),u.push("expires="+d)),o.length<500){if(a.cookie=u.join("; "),i===(s=this.getCookie(e)))return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+i+"\n"+s)}else BOOMR.warn("Cookie too long: "+o.length+" "+o);return!1},getSubCookies:function(e){var t,n,i,r,o=!1,a={};if(!e)return null;if("string"!=typeof e)return BOOMR.debug("TypeError: cookie is not a string: "+typeof e),null;for(n=0,i=(t=e.split("&")).length;n<i;n++)(r=t[n].split("="))[0]&&(r.push(""),a[decodeURIComponent(r[0])]=decodeURIComponent(r[1]),o=!0);return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},cleanupURL:function(e){return e&&"[object Array]"!==Object.prototype.toString.call(e)?r.strip_query_string?e.replace(/\?.*/,"?qs-redacted"):e:""},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),BOOMR.utils.MD5?e.replace(/\?([^#]*)/,(function(e,t){return"?"+(t.length>10?BOOMR.utils.MD5(t):t)})):e):(BOOMR.error("Passed in URL is invalid: "+e),"")):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e),""):e},pluginConfig:function(e,t,n,i){var r,o=0;if(!t||!t[n])return!1;for(r=0;r<i.length;r++)void 0!==t[n][i[r]]&&(e[i[r]]=t[n][i[r]],o++);return o>0},arrayFilter:function(e,t){var n=[];if("function"==typeof e.filter)n=e.filter(t);else for(var i,r=-1,o=e.length;++r<o;)t(i=e[r],r,e)&&(n[n.length]=i);return n},addObserver:function(e,t,n,i,r,o){var a={observer:null,timer:null};if(!window.MutationObserver||!i||!e)return null;function s(e){var t=!1;a.timer&&(clearTimeout(a.timer),a.timer=null),i&&((t=i.call(o,e,r))||(i=null)),!t&&a.observer&&(a.observer.disconnect(),a.observer=null),"number"==typeof t&&t>0&&(a.timer=setTimeout(s,t))}return a.observer=new MutationObserver(s),n&&(a.timer=setTimeout(s,a.timeout)),a.observer.observe(e,t),a},addListener:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeListener:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},pushVars:function(e,t,n){var i,r,o,a=0;for(i in t)if(t.hasOwnProperty(i))if("[object Array]"===Object.prototype.toString.call(t[i]))for(r=0;r<t[i].length;++r)a+=BOOMR.utils.pushVars(e,t[i][r],i+"["+r+"]");else(o=document.createElement("input")).type="hidden",o.name=n?n+"["+i+"]":i,o.value=void 0===t[i]||null===t[i]?"":t[i],e.appendChild(o),a+=encodeURIComponent(o.name).length+encodeURIComponent(o.value).length+2;return a},sendData:function(e,t){document.createElement("input");var n=[r.beacon_url];function i(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}e.method=t,e.id="beacon_form",e.enctype="application/x-www-form-urlencoded",r.secondary_beacons&&r.secondary_beacons.length&&n.push.apply(n,r.secondary_beacons),function t(){var r,o="boomerang_post-"+encodeURIComponent(e.action)+"-"+Math.random();try{r=document.createElement('<iframe name="'+o+'">')}catch(e){r=document.createElement("iframe")}e.action=n.shift(),r.name=r.id=o,r.style.display=e.style.display="none",r.src="javascript:false",i(r.id),i(e.id),document.body.appendChild(r);var a=r.contentWindow||r.contentDocument;a.document&&(a=a.document),a.body?a.body.appendChild(e):a.appendChild(e);try{e.submit()}catch(e){}n.length&&BOOMR.setImmediate(t),setTimeout((function(){i(r.id)}),1e4)}()}},init:function(e){var t,o,s=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string","secondary_beacons","autorun"];if(n(),e||(e={}),e.primary&&r.handlers_attached)return this;for(o in void 0!==e.log&&(this.log=e.log),this.log||(this.log=function(){}),this.plugins)if(this.plugins.hasOwnProperty(o)){if(e[o]&&e[o].hasOwnProperty("enabled")&&!1===e[o].enabled){r.disabled_plugins[o]=1,"function"==typeof this.plugins[o].disable&&this.plugins[o].disable();continue}if(r.disabled_plugins[o]){if(!e[o]||!e[o].hasOwnProperty("enabled")||!0!==e[o].enabled)continue;"function"==typeof this.plugins[o].enable&&this.plugins[o].enable(),delete r.disabled_plugins[o]}if("function"==typeof this.plugins[o].init)try{this.plugins[o].init(e)}catch(e){BOOMR.addError(e,o+".init")}}for(t=0;t<s.length;t++)void 0!==e[s[t]]&&(r[s[t]]=e[s[t]]);return r.handlers_attached||(r.onloadfired||void 0!==e.autorun&&!1===e.autorun||(a.readyState&&"complete"===a.readyState?(BOOMR.loadedLate=!0,this.setImmediate(BOOMR.page_ready_autorun,null,null,BOOMR)):i.onpagehide||null===i.onpagehide?BOOMR.utils.addListener(i,"pageshow",BOOMR.page_ready_autorun):BOOMR.utils.addListener(i,"load",BOOMR.page_ready_autorun)),BOOMR.utils.addListener(i,"DOMContentLoaded",(function(){r.fireEvent("dom_loaded")})),function(){var e,t;for(void 0!==c&&(BOOMR.utils.addListener(a,c,(function(){r.fireEvent("visibility_changed")})),BOOMR.subscribe("visibility_changed",(function(){BOOMR.lastVisibilityEvent[BOOMR.visibilityState()]=BOOMR.now()}))),BOOMR.utils.addListener(a,"mouseup",r.xb_handler("click")),e=a.getElementsByTagName("form"),t=0;t<e.length;t++)BOOMR.utils.addListener(e[t],"submit",r.xb_handler("form_submit"));i.onpagehide||null===i.onpagehide||BOOMR.utils.addListener(i,"unload",(function(){BOOMR.window=i=null}))}(),r.handlers_attached=!0),this},page_ready_autorun:function(e){r.autorun&&BOOMR.page_ready(e)},page_ready:function(e){return e||(e=i.event),e||(e={name:"load"}),r.onloadfired||(r.fireEvent("page_ready",e),r.onloadfired=!0),this},setImmediate:function(e,t,n,r){var o,a;"undefined"!=typeof Error&&(a=(a=new Error).stack?a.stack.replace(/^Error/,"Called"):void 0),o=function(){e.call(r||null,t,n||{},a),o=null},i.setImmediate?i.setImmediate(o):i.msSetImmediate?i.msSetImmediate(o):i.webkitSetImmediate?i.webkitSetImmediate(o):i.mozSetImmediate?i.mozSetImmediate(o):setTimeout(o,10)},now:function(){try{if("performance"in window&&window.performance&&window.performance.now)return function(){return Math.round(window.performance.now()+window.performance.timing.navigationStart)}}catch(e){}return Date.now||function(){return(new Date).getTime()}}(),visibilityState:void 0===l?function(){return"visible"}:function(){return a[l]},lastVisibilityEvent:{},subscribe:function(e,t,n,o){var a,s,u,d,l;if(e=e.toLowerCase(),!r.events.hasOwnProperty(e))return this;for(u=r.events[e],a=0;a<u.length;a++)if((s=u[a])&&s.fn===t&&s.cb_data===n&&s.scope===o)return this;return u.push({fn:t,cb_data:n||{},scope:o||null}),"page_ready"===e&&r.onloadfired&&this.setImmediate(t,null,n,o),"page_unload"!==e&&"before_unload"!==e||(l=u.length,d=function(a){t&&t.call(o,a||i.event,n),"page_unload"===e&&l===r.events[e].length&&BOOMR.real_sendBeacon()},"page_unload"===e&&(i.onpagehide||null===i.onpagehide?BOOMR.utils.addListener(i,"pagehide",d):BOOMR.utils.addListener(i,"unload",d)),BOOMR.utils.addListener(i,"beforeunload",d)),this},addError:function(e,t,n){var i;"string"!=typeof e&&((i=String(e)).match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,"")),e=i),void 0!==t&&(e="["+t+":"+BOOMR.now()+"] "+e),n&&(e+=":: "+n),r.errors[e]?r.errors[e]++:r.errors[e]=1},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)},addVar:function(e,t){if("string"==typeof e)r.vars[e]=t;else if("object"==typeof e){var n,i=e;for(n in i)i.hasOwnProperty(n)&&(r.vars[n]=i[n])}return this},removeVar:function(e){var t,n;if(!arguments.length)return this;for(n=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(e)?e:arguments,t=0;t<n.length;t++)r.vars.hasOwnProperty(n[t])&&delete r.vars[n[t]];return this},hasVar:function(e){return r.vars.hasOwnProperty(e)},requestStart:function(e){var t=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+e,t),{loaded:function(n){BOOMR.responseEnd(e,t,n)}}},responseEnd:function(e,t,n){"object"==typeof e&&e.url?r.fireEvent("xhr_load",e):(BOOMR.plugins.RT.startTimer("xhr_"+e,t),r.fireEvent("xhr_load",{name:"xhr_"+e,data:n}))},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(e){return e&&(r.beacon_url=e),r.beaconQueued||(r.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},real_sendBeacon:function(){var e,t,n,o,s=0,u=[],d=0;if(!r.beaconQueued)return!1;for(e in r.beaconQueued=!1,BOOMR.debug("Checking if we can send beacon"),this.plugins)if(this.plugins.hasOwnProperty(e)){if(r.disabled_plugins[e])continue;if(!this.plugins[e].is_complete())return BOOMR.debug("Plugin "+e+" is not complete, deferring beacon send"),!1}var l="spa"===r.vars["http.initiator"],c=l?a.URL:a.URL.replace(/#.*/,"");for(e in r.vars.pgu=BOOMR.utils.cleanupURL(c),r.vars.u&&!l||(r.vars.u=r.vars.pgu),r.vars.pgu===r.vars.u&&delete r.vars.pgu,r.vars.v=BOOMR.version,BOOMR.visibilityState()&&(r.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(r.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(r.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)),r.vars["ua.plt"]=navigator.platform,r.vars["ua.vnd"]=navigator.vendor,i!==window&&(r.vars.if=""),r.errors)r.errors.hasOwnProperty(e)&&u.push(e+(r.errors[e]>1?" (*"+r.errors[e]+")":""));if(u.length>0&&(r.vars.errors=u.join("\n")),r.errors={},r.fireEvent("before_beacon",r.vars),BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(r.vars)),!r.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),!0;if(BOOMR.hasVar("restiming"))t=document.createElement("form"),s=BOOMR.utils.pushVars(t,r.vars);else{for(e in o=[],r.vars)r.vars.hasOwnProperty(e)&&(d++,o.push(encodeURIComponent(e)+"="+(void 0===r.vars[e]||null===r.vars[e]?"":encodeURIComponent(r.vars[e]))));n=r.beacon_url+(r.beacon_url.indexOf("?")>-1?"&":"?")+o.join("&")}if(r.fireEvent("onbeacon",r.vars),0===s&&0===d)return this;if(d){if((new Image).src=n,r.secondary_beacons)for(e=0;e<r.secondary_beacons.length;e++)n=r.secondary_beacons[e]+"?"+o.join("&"),(new Image).src=n}else BOOMR.utils.sendData(t,"AUTO"===r.beacon_type?s>2e3?"POST":"GET":"POST");return!0}},delete window.BOOMR_start,"number"==typeof BOOMR_lstart?(o.t_lstart=BOOMR_lstart,delete window.BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(o.t_lstart=BOOMR.window.BOOMR_lstart),"number"==typeof BOOMR.window.BOOMR_onload&&(o.t_onload=BOOMR.window.BOOMR_onload),"object"==typeof console&&void 0!==console.log&&(o.log=function(e,t,n){console.log(n+": ["+t+"] "+e)}),p=function(e){return function(t,n){return this.log(t,e,"boomerang"+(n?"."+n:"")),this}},o.debug=p("debug"),o.info=p("info"),o.warn=p("warn"),o.error=p("error"),function(){var e;for(e in o)o.hasOwnProperty(e)&&(BOOMR[e]=o[e]);BOOMR.xhr_excludes||(
//! URLs to exclude from automatic XHR instrumentation
BOOMR.xhr_excludes={})}(),d("onBoomerangLoaded",{BOOMR:BOOMR},!0)),function(){var e,t,n,i=!1,r=!1,o=["uninitialized","open","responseStart","domInteractive","responseEnd"];function a(e){if(!e)return null;e.href=e.href;var t=e.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}function s(e){return BOOMR.xhr_excludes.hasOwnProperty(e.href)||BOOMR.xhr_excludes.hasOwnProperty(e.hostname)||BOOMR.xhr_excludes.hasOwnProperty(a(e))}function u(){this.watch=0,this.timer=null,this.pending_events=[]}function d(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==BOOMR.window.XMLHttpRequest){if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===BOOMR.window.XMLHttpRequest)return BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest,void u.start();BOOMR.orig_XMLHttpRequest=BOOMR.window.XMLHttpRequest,u.start(),BOOMR.subscribe("click",(function(){if(!i){var e={timing:{},initiator:"click"};BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest&&(e.timing.requestStart=BOOMR.now(),t.addEvent(e))}})),BOOMR.proxy_XMLHttpRequest=function(){var e,a,u,d={timing:{},initiator:"xhr"};return e=new BOOMR.orig_XMLHttpRequest,a=e.open,u=e.send,e.open=function(u,l,c){if(n.href=l,s(n))return a.apply(e,arguments);function p(){d.timing.loadEventEnd||(d.timing.loadEventEnd=BOOMR.now(),d.index>-1?t.load_finished(d.index):i&&!r||t.addEvent(d))}function O(t,n){e.addEventListener(t,(function(){"readystatechange"===t?(d.timing[o[e.readyState]]=BOOMR.now(),4===e.readyState&&p()):(d.status=void 0===n?e.status:n,p())}),!1)}void 0===c&&(c=!0),i&&t.watch&&t.add_event_resource(d),c&&O("readystatechange"),O("load"),O("timeout",-1001),O("error",-998),O("abort",-999),d.url=n.href,d.method=u,delete d.status,c||(d.synchronous=!0);try{return a.apply(e,arguments)}catch(e){d.status=-997,p()}},e.send=function(){if(d.timing.requestStart=BOOMR.now(),void 0===d.status||-997!==d.status)return u.apply(e,arguments)},e.resource=d,e},BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest}}function l(){BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest&&(BOOMR.window.XMLHttpRequest=BOOMR.orig_XMLHttpRequest)}window.XMLHttpRequest&&(new XMLHttpRequest).addEventListener&&(BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.AutoXHR||(u.stop=function(){u.observer&&u.observer.observer&&(u.observer.observer.disconnect(),u.observer=null)},u.start=function(){u.observer=BOOMR.utils.addObserver(e,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]},null,t.mutation_cb,null,t),BOOMR.subscribe("page_unload",u.stop,null,u)},u.prototype.addEvent=function(e){var t,n,i={type:e.initiator,resource:e,nodes_to_wait:0,resources:[],complete:!1},r=this.pending_events.length;for(t=r-1;t>=0;t--)if(this.pending_events[t]&&!this.pending_events[t].complete){n=this.pending_events[t];break}if(n)if("click"===n.type){if(0===n.nodes_to_wait||!n.resource.url)return this.pending_events[t]=void 0,null}else if("xhr"===n.type){if("click"===i.type)return null}else if("spa"===n.type&&"xhr"===i.type)return null;return this.watch++,this.pending_events.push(i),u.observer?("spa"!==i.type?this.setTimeout(50,r):this.setTimeout(1e3,r),r):(e.url&&e.timing.loadEventEnd&&this.sendEvent(r),null)},u.prototype.sendEvent=function(e){var t=this.pending_events[e];if(t&&!t.complete){if(t.complete=!0,this.watch--,this.clearTimeout(),t.resource.resources=t.resources,BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_supported()&&t.resource.timing&&t.resource.timing.requestStart){var n=BOOMR.plugins.ResourceTiming.getResourceTiming(t.resource.timing.requestStart);BOOMR.addVar("restiming",JSON.stringify(n))}t.resource.onComplete&&t.resource.onComplete();var i=t.resource.timing?t.resource.timing.requestStart:void 0;BOOMR.responseEnd(t.resource,i,t.resource),this.pending_events[e]=void 0}},u.prototype.setTimeout=function(e,t){var n=this;e&&(this.clearTimeout(),this.timer=setTimeout((function(){n.timedout(t)}),e))},u.prototype.timedout=function(e){this.clearTimeout(),!this.pending_events[e]||"xhr"!==this.pending_events[e].type&&"spa"!==this.pending_events[e].type?(this.watch>0&&this.watch--,this.pending_events[e]=void 0):("xhr"===this.pending_events[e].type||"spa"===this.pending_events[e].type&&0===this.pending_events[e].nodes_to_wait)&&this.sendEvent(e)},u.prototype.clearTimeout=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},u.prototype.load_cb=function(e){var t,n;(t=e.target||e.srcElement)&&t._bmr&&(t._bmr.end||(t._bmr.end=BOOMR.now(),t._bmr.state=e.type,n=t._bmr.res,this.load_finished(n)))},u.prototype.load_finished=function(e){var t=this.pending_events[e];t&&(t.nodes_to_wait--,0===t.nodes_to_wait&&(t.resource.timing.loadEventEnd=BOOMR.now(),"spa"===t.type?this.setTimeout(1e3,e):this.sendEvent(e)))},u.prototype.wait_for_node=function(e,t){var r,o,a,u,d,l=this,c=!1,p=!1;if(e.nodeName.match(/^(IMG|SCRIPT|IFRAME)$/)||"LINK"===e.nodeName&&e.rel&&e.rel.match(/\<stylesheet\>/i)){if(e._bmr&&e._bmr.end&&(p=!0),e._bmr={start:BOOMR.now(),res:t},d=e.src||e.href,"IMG"===e.nodeName){if(e.naturalWidth&&!p)return!1;if(""===e.getAttribute("src"))return!1}if(!d||d.match(/^(about:|javascript:)/i))return!1;if(!(r=this.pending_events[t]))return!1;if(r.urls||(r.urls={}),r.urls[d])return!1;if("SCRIPT"===e.nodeName&&i)return!1;if(!r.resource.url&&("SCRIPT"===e.nodeName||"IMG"===e.nodeName)){if(n.href=d,s(n))return!1;r.resource.url=n.href}e.addEventListener("load",(function(e){l.load_cb(e)})),e.addEventListener("error",(function(e){l.load_cb(e)})),r.nodes_to_wait++,r.resources.push(e),r.urls[d]=1,c=!0}else if(e.nodeType===Node.ELEMENT_NODE&&(o=e.getElementsByTagName("IMG"))&&o.length)for(a=0,u=o.length;a<u;a++)c|=this.wait_for_node(o[a],t);return c},u.prototype.add_event_resource=function(e){var t,n=this.pending_events.length-1;return n<0?-1:(t=this.pending_events[n])&&e?(t.nodes_to_wait++,e.index=n,n):-1},u.prototype.mutation_cb=function(e){var t,n,i;return!this.watch||(this.clearTimeout(),t=this,n=!1,(i=this.pending_events.length-1)<0||!this.pending_events[i]||(e&&e.length&&(this.pending_events[i].resource.timing.domComplete=BOOMR.now(),e.forEach((function(e){var r,o;if("attributes"===e.type)n|=t.wait_for_node(e.target,i);else if("childList"===e.type)for(o=e.addedNodes.length,r=0;r<o;r++)n|=t.wait_for_node(e.addedNodes[r],i)}))),n||this.setTimeout(1e3,i)),!0)},u.prototype.queue_is_empty=function(){if(0===this.pending_events.length)return!0;var e=this.pending_events.length-1;return!this.pending_events[e]||0===this.pending_events[e].nodes_to_wait},t=new u,BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(t){if(e=BOOMR.window.document,n=BOOMR.window.document.createElement("A"),BOOMR.instrumentXHR=d,BOOMR.uninstrumentXHR=l,r=t.instrument_xhr,BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks)for(var o=BOOMR.plugins.SPA.supported_frameworks(),a=0;a<o.length;a++){var s=o[a];if(t[s]&&t[s].enabled){i=!0;break}}i?(r=!1,BOOMR.instrumentXHR()):r?BOOMR.instrumentXHR():!1===r&&BOOMR.uninstrumentXHR()},getMutationHandler:function(){return t},getPathname:a,enableAutoXhr:function(){r=!0}}))}(),BOOMR.window,f=!1,h=!1,m=!1,v="",g=!1,R=[],BOOMR.plugins.SPA||(BOOMR.plugins.SPA={is_complete:function(){return!0},init:function(e){e&&e.instrument_xhr&&(g=e.instrument_xhr,h&&g&&BOOMR.plugins.AutoXHR.enableAutoXhr())},register:function(e){R.push(e)},supported_frameworks:function(){return R},hook:function(e){return f||(e&&(g&&BOOMR.plugins.AutoXHR.enableAutoXhr(),m=!0,BOOMR.addVar("http.initiator","spa"),BOOMR.page_ready()),f=!0),this},route_change:function(){h=!0;var e={timing:{requestStart:m?BOOMR.now():BOOMR.plugins.RT.navigationStart()},initiator:"spa",url:v||BOOMR.window.document.URL};m||(e.onComplete=function(){m=!0}),e.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(e),g&&BOOMR.plugins.AutoXHR.enableAutoXhr()},last_location:function(e){v=e}})},"9LAa":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("CLb1"),o=(i=r)&&i.__esModule?i:{default:i};t.default=o.default},CLb1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n("cDcd"),o=(u(r),u(n("rf6O"))),a=u(n("nmjS")),s=u(n("QsiJ"));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,a.default)(),n.plugin=new s.default,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.onNavigationComplete;n("26rN");var t=window.BOOMR;t.plugins.SPA.register("React"),t.plugins.React=this.plugin,t.init({React:{enabled:!0},autorun:!1,instrument_xhr:!0}).subscribe("xhr_load",(function(t){"spa"===t.initiator&&e&&e(t)})),this.plugin.hook(!0)}},{key:"render",value:function(){return null}}]),t}(r.Component);t.default=d,d.propTypes={onNavigationComplete:o.default.func},d.initialize=a.default},QsiJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isEnabled=!0,this.handleHistoryChange=this.handleHistoryChange.bind(this),this.handleRouteChange=this.handleRouteChange.bind(this)}return i(e,[{key:"is_complete",value:function(){return!0}},{key:"hook",value:function(e){window.addEventListener("beforepushstate",this.handleHistoryChange),window.addEventListener("beforereplacestate",this.handleHistoryChange),window.addEventListener("popstate",this.handleHistoryChange),window.addEventListener("hashchange",this.handleHistoryChange),window.addEventListener("pushstate",this.handleRouteChange),window.addEventListener("replacestate",this.handleRouteChange),window.addEventListener("popstate",this.handleRouteChange),window.addEventListener("hashchange",this.handleRouteChange),window.BOOMR.plugins.SPA.hook(e)}},{key:"enable",value:function(){return this.isEnabled=!0,this}},{key:"disable",value:function(){return this.isEnabled=!1,this}},{key:"handleHistoryChange",value:function(e){if(this.isEnabled){var t=e.url||window.location.href;window.BOOMR.plugins.SPA.last_location(t)}}},{key:"handleRouteChange",value:function(){this.isEnabled&&window.BOOMR.plugins.SPA.route_change()}}]),e}();t.default=r},geD2:function(e,t,n){e.exports=n("9LAa").default},nmjS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(i)return;i=!0,r(history,"pushState","beforepushstate","pushstate"),r(history,"replaceState","beforereplacestate","replacestate")};var i=!1;function r(e,t,n,i){var r=e[t];e[t]=function(t,a,s){o(n,s),r.call(e,t,a,s),o(i,s)}}function o(e,t){var n=window.document.createEvent("Event");n.url=t,n.initEvent(e,!1,!1),window.dispatchEvent(n)}}}]);
//# sourceMappingURL=https://blobby.test-wsimg.com/go/static/editor/react-spa-navigation-timer.9320031ddfe527547adf.c.js.map