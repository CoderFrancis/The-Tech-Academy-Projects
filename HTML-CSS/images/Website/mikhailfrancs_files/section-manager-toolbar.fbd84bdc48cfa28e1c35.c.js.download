(window.editorJsonp=window.editorJsonp||[]).push([[120],{"4x6u":function(e,t,i){},EPLJ:function(e,t,i){"use strict";i.r(t);var n=i("lSNA"),o=i.n(n),c=(i("FmB3"),i("BLxL"),i("cDcd")),a=i("JPcv"),s=i("/MKj"),d=i("TSYQ"),l=i.n(d),r=i("dwxX"),u=i("Jsc0"),g=i.n(u),O=i("vXHV"),p=i.n(O),h=i("Yijx"),j=i("taM/"),b=i("o2mW"),I=i("nsmI"),w=(i("lGJp"),i("oKMK"),i("V0J4"),i("40A7"),i("hplg")),x=i("atyL"),T=i.n(x),m=i("4rUJ"),E=i.n(m),S=i("ley4"),A=i.n(S),_=i("8zog"),f=i("q1hO"),v=i("L2pB"),N=i("oYaP"),P=i("Olao"),y=i("XET/"),M=(i("n4ma"),i("icSl")),C=i("O2TY"),D=i("nKUr");function W({isToolbarFocused:e,trigger:t,children:i}){const n=c.useRef(null);return Object(D.jsx)(C.a,{hideOnScroll:!0,useGlobalViewport:!0,useThemeLayer:!1,renderInline:({toggle:e})=>Object(D.jsx)("div",{ref:n,onClick:e,children:t}),renderInsideLayer:({hide:t})=>e&&n.current?Object(D.jsx)(M.a,{anchor:n.current.getBoundingClientRect(),side:"bottom",alignment:"middle",className:"p1ykafe7",useGlobalViewport:!0,ignoreViewport:!0,children:Object(D.jsx)("div",{className:l()("p13ha1cg","bg-light"),"data-edit-interactive":!0,children:"function"==typeof i?i(t):i})}):null})}i("lWMZ");function G({setOverlay:e,deleteSection:t,duplicateSection:i,moveSection:n,hide:o,isWidgetMovableToPage:a,isDuplicateAllowed:s}){const[d,u]=Object(c.useState)(!1);return Object(D.jsxs)(D.Fragment,{children:[s&&Object(D.jsxs)(P.a,{"data-aid":f.a.DUPLICATE_WIDGET_FLYOUT_OPTION,closeFlyoutOnClick:!1,onMouseEnter:()=>e("primary"),onMouseLeave:()=>e(null),onClick:()=>{i(),u(!0),e(null),Object(r.c)({code:v.DUPLICATE_SECTION_OPTION})},children:[d?Object(D.jsx)("div",{className:l()("s1m9k9mk","flex"),children:Object(D.jsx)(w.Spinner,{size:"sm"})}):Object(D.jsx)(E.a,{height:16}),Object(D.jsx)(N.a,{id:"duplicateSection"})]}),a&&Object(D.jsxs)(P.a,{"data-aid":f.a.MOVE_SECTION_OPTION,closeFlyout:o,closeFlyoutOnClick:!1,onMouseEnter:()=>e("primary"),onMouseLeave:()=>e(null),onClick:()=>{n(),Object(r.c)({code:v.MOVE_SECTION_OPTION})},children:[Object(D.jsx)(_.a,{icon:"addToPage",height:22,width:22}),Object(D.jsx)(N.a,{id:"moveSection"})]}),Object(D.jsxs)(P.a,{className:"delete-option","data-aid":f.a.DELETE_WIDGET_FLYOUT_OPTION,closeFlyout:o,onMouseEnter:()=>e("danger"),onMouseLeave:()=>e(null),onClick:()=>{e(null),t(),Object(r.c)({code:v.DELETE_SECTION_OPTION})},children:[Object(D.jsx)(A.a,{height:16}),Object(D.jsx)(N.a,{id:"deleteSectionButton"})]})]})}function k({setOverlay:e,widgetId:t,widgetType:i,deleteSection:n,duplicateSection:o,isWidgetDeletable:a,isWidgetMovableToPage:s,isDuplicateAllowed:d,isToolbarFocused:l}){const[r,u]=Object(c.useState)(!1);if(!a)return null;const g=Object(D.jsx)(I.a,{dataAid:f.a.SECTION_MANAGER_SETTINGS,tooltipText:Object(D.jsx)(N.a,{id:"settings"}),children:Object(D.jsx)(T.a,{width:20,height:20})});return Object(D.jsx)(W,{trigger:g,isToolbarFocused:l,children:c=>r?Object(D.jsx)(y.a,{fullScreen:!1,widgetType:i,widgetId:t,closeFlyout:()=>u(!1)}):Object(D.jsx)(G,{widgetId:t,hide:c,setOverlay:e,deleteSection:n,duplicateSection:o,isDuplicateAllowed:d,isWidgetMovableToPage:s,moveSection:()=>u(!0)})})}i("4x6u");var L=i("SMay"),B=i("wqHn"),U=i("foj4"),F=i("OpJB"),J=i("XrNU");var V=function(e,{widgetId:t,newIndex:i}){const n=Object(B.n)(e.getState()).toJS();if(i<0||i>n.length-1)throw new Error(`Can't move ${t} to position ${i}. Root widgets: ${JSON.stringify(n)}`);const o=n.indexOf(t);if(-1===o)throw new Error(`${t} was not found in rootWidgets array, ${JSON.stringify(n)}`);return n.splice(o,1),n.splice(i,0,t),e.executeAction(J.a,{navigation:n,hideHeaderFooter:!0})};var R=function(e,{widgetId:t}){const i=Object(B.n)(e.getState()).indexOf(t);return e.executeAction(V,{widgetId:t,newIndex:i+1}).then(()=>{e.executeAction(F.a,{query:{scrollToWidgetId:t}})})};var q=function(e,{widgetId:t}){const i=Object(B.n)(e.getState()),n=i.indexOf(t),o=i.get(n-1);return e.executeAction(F.a,{query:{scrollToWidgetId:o,duration:"0"}}).then(()=>e.executeAction(V,{widgetId:t,newIndex:n-1})).then(()=>{e.executeAction(F.a,{query:{scrollToWidgetId:t}})})},H=i("Uuec"),Y=i("H4Ah"),K=i("9q1s"),X=i("XZW0"),Z=i("hjNj"),z=i("sD08"),$=i("8IS9"),Q=i("7ikK"),ee=i("u1xw");class te extends c.PureComponent{constructor(...e){super(...e),o()(this,"toggleAddSectionButton",e=>{this.context.executeAction(X.a,{show:e})}),o()(this,"moveSectionUp",()=>{const{widgetId:e}=this.props;this.context.executeAction(q,{widgetId:e}),Object(r.c)({code:v.MOVE_SECTION_UP})}),o()(this,"moveSectionDown",()=>{const{widgetId:e}=this.props;this.context.executeAction(R,{widgetId:e}),Object(r.c)({code:v.MOVE_SECTION_DOWN})}),o()(this,"navigateToColorEditorHandler",()=>{this.toggleAddSectionButton(!0),this.context.executeAction(F.a,{routeName:Y.a.EDIT_THEME,params:{panel:"colors"}})}),o()(this,"duplicateSection",()=>{const{widgetId:e}=this.props;this.toggleAddSectionButton(!0),this.context.executeAction(Z.a,{widgetId:e})}),o()(this,"deleteSection",()=>{const{widgetId:e}=this.props;this.toggleAddSectionButton(!0),this.context.executeAction(h.a,{modal:Object(D.jsx)(j.a,{widgetId:e})})}),o()(this,"goToPresetMutator",()=>{const{widgetId:e}=this.props;this.context.executeAction(F.a,{routeName:Y.a.EDIT_WIDGET_PRESETS,params:{widgetId:e}})}),o()(this,"updateWidgetSectionColor",e=>{const{widgetType:t}=this.props;Object(r.c)({code:v.UPDATE_SECTION_COLOR_USING_INLINE_PICKER,widgetType:t}),this.context.executeAction($.a,{widget:e})})}render(){const{widgetId:e,widgetType:t,isFocused:i,isFirst:n,isLast:o,className:c,showPresetButton:a,isWidgetMovable:s,isWidgetDeletable:d,isWidgetMovableToPage:r,isDuplicateAllowed:u}=this.props;return Object(D.jsx)(z.a,{children:({setOverlay:O,overlay:h})=>Object(D.jsxs)(b.a,{onMouseEnter:()=>this.toggleAddSectionButton(!1),onMouseLeave:()=>this.toggleAddSectionButton(!0),className:l()(h,c),children:[s?Object(D.jsx)(I.a,{tooltipText:Object(D.jsx)(N.a,{id:"moveSectionUp"}),dataAid:f.a.SECTION_MANAGER_MOVE_UP_SECTION,disabled:n,onClick:()=>{this.moveSectionUp(),this.toggleAddSectionButton(!0)},children:Object(D.jsx)(g.a,{width:20,height:20})}):null,s?Object(D.jsx)(I.a,{tooltipText:Object(D.jsx)(N.a,{id:"moveSectionDown"}),dataAid:f.a.SECTION_MANAGER_MOVE_DOWN_SECTION,disabled:o,onClick:()=>{this.moveSectionDown(),this.toggleAddSectionButton(!0)},onMouseEnter:()=>O("primary"),onMouseLeave:()=>O(null),children:Object(D.jsx)(p.a,{width:20,height:20})}):null,a?Object(D.jsx)(I.a,{tooltipText:Object(D.jsx)(N.a,{id:"layout"}),dataAid:f.a.SECTION_MANAGER_CHANGE_PRESET,trafficId:H.c.section_manager.change_preset_button,onClick:this.goToPresetMutator,children:Object(D.jsx)(_.a,{width:20,height:20,icon:"layout"})}):null,Object(D.jsx)(k,{isToolbarFocused:i,setOverlay:O,widgetId:e,widgetType:t,isDuplicateAllowed:u,isWidgetMovableToPage:r,isWidgetDeletable:d,duplicateSection:this.duplicateSection,deleteSection:this.deleteSection})]})})}}function ie(e,t){return Object(L.o)(e,"inlineSectionPreset")&&"HEADER"!==t&&Object(K.b)(e)[t]>1}o()(te,"contextType",ee.b);t.default=Object(s.connect)((function(e,{widgetId:t,widgetType:i}){const n=Object(B.n)(e)||Object(a.List)(),o=n.indexOf(t);return{isFirst:0===o,isLast:o===n.size-1,isWidgetMovable:Object(Q.i)(e)[i],isWidgetMovableToPage:Object(Q.j)(e)[i],widget:Object(U.u)(e).get(t),showPresetButton:ie(e,i),isWidgetDeletable:Object(Q.h)(e)[i],isDuplicateAllowed:Object(Q.m)(e)[i]}}))(te)},JkTf:function(e,t,i){},V0J4:function(e,t,i){},"XET/":function(e,t,i){"use strict";var n=i("lSNA"),o=i.n(n),c=(i("JkTf"),i("hcUJ")),a=i("cDcd"),s=i("/MKj"),d=i("TSYQ"),l=i.n(d),r=i("JPcv"),u=i("hplg"),g=i("Olao"),O=i("q1hO"),p=i("Uuec"),h=i("AbpD"),j=i("OpJB"),b=i("kUj2"),I=i("t+uG"),w=i("lvcY");var x=function(e,{widgetId:t,pageId:i,websiteId:n,newPageId:o}){const c={url:I.w,method:"post",segments:{websiteId:n,pageId:i,widgetId:t,newPageId:o},metadata:{type:w.a.MOVE_PAGE_WIDGET,param:t}};return e.executeAction(b.a,c)},T=i("dwxX"),m=i("5lD2"),E=i("1ZWq"),S=i("svNM"),A=i("wqHn"),_=i("cmhP"),f=i("nKUr");const{addGrowlMessage:v,removeGrowlMessage:N}=u.Growl;var P=function(e,{pageId:t,widget:i}){const n=Object(A.l)(e.getState()).get(t),o=Object(S.c)(i),a=Object(m.uniqueId)();return v({id:a,title:Object(c.a)("sectionMoved"),content:Object(f.jsx)("div",{"data-aid":O.a.MOVE_SECTION_GROWL,children:Object(f.jsx)(E.a,{wrap:i=>function(e,t,i,n){const o=e.getState(),c=Object(_.k)(o);return Object(f.jsx)(u.Button,{design:"inline",className:l()({"text-purchase":c}),href:"#",style:{verticalAlign:"baseline"},"data-aid":O.a.MOVE_SECTION_GROWL_PAGE_LINK,onClick:n=>{n.preventDefault(),t&&t(),Object(T.c)({code:p.c.move_section.growl_page_link,domEvent:n}),e.executeAction(j.a,{params:{pageId:i}})},text:n})}(e,()=>N(a),t,i),children:Object(c.a)("sectionMovedTo",{sectionName:o,pageName:n.get("name")})})}),fadeTime:5e3}),Promise.resolve()},y=i("gU+0"),M=i("+k5a"),C=i("38OZ"),D=i("H4Ah"),W=i("a8SQ"),G=i("foj4"),k=i("n4ap");var L=Object(W.b)((function(e,{widgetId:t,newPageId:i}){const n=e.getState(),o=Object(G.u)(n).get(t),c=o.get("websiteId"),a=o.get("pageId"),s=!Object(k.B)(n);return e.executeAction(h.a).then(()=>e.executeAction(j.a,{...s&&{routeName:D.a.EDIT},query:{moveWidgetId:t}})).then(()=>e.executeAction(x,{websiteId:c,pageId:a,widgetId:t,newPageId:i})).then(()=>Promise.all([e.executeAction(M.a,{pageId:a}),e.executeAction(M.a,{pageId:i}),e.executeAction(y.a)])).then(()=>{e.executeAction(P,{pageId:i,widget:o}),e.dispatch({type:C.a.DELETE_PAGE_WIDGET,payload:{widgetId:t}})})}),w.a.MOVE_PAGE_WIDGET),B=i("SMay"),U=i("00lU"),F=i("7ikK"),J=i("u1xw");const V=p.c.section_flyout;class R extends a.PureComponent{constructor(){super(...arguments),o()(this,"handlePageClick",e=>{this.setState({selectedPageId:e})}),o()(this,"handleOkClick",()=>{const{widgetId:e}=this.props,{selectedPageId:t}=this.state;t&&this.context.executeAction(L,{widgetId:e,newPageId:t})}),this.state={selectedPageId:null}}getPageOptions(){const{pages:e,currentPage:t,maxWidgetsLimit:i,widgetsByPageId:n,widgetType:o,isMultipleAllowedPerType:c}=this.props;return e.filter(e=>e.get("id")!==(t||Object(r.Map)()).get("id")).map(e=>{let t;const a=e.get("id"),s=Object(U.a)(e,i);if(n[a]){const e=!n[a].widgets.includes(o);t=s&&(c[o]||e)}else t=s;return{id:a,name:e.get("name"),canAddWidget:t}})}render(){const{selectedPageId:e}=this.state,{fullScreen:t,closeFlyout:i,isReseller:n}=this.props;return Object(f.jsxs)("div",{"data-aid":O.a.MOVE_SECTION_FLYOUT,className:l()("flex flex--column move-section-options bg-faint",{"full-screen":t}),children:[Object(f.jsx)("div",{className:"ta-center move-section-header",children:Object(c.a)("moveSectionTitle")}),Object(f.jsx)("div",{className:"move-section-options-list bg-light",children:this.getPageOptions().map(t=>Object(f.jsx)(g.a,{className:l()("move-section-page-option bc-faint",{selected:e===t.id}),closeFlyoutOnClick:!1,disabled:!t.canAddWidget,"data-aid":"MOVE_TO_PAGE_"+t.name,onClick:this.handlePageClick.bind(null,t.id),"data-traffic2":V.move_section_page_option,children:t.name},t.id))}),Object(f.jsxs)("div",{className:"flex move-section-footer bg-faint",children:[Object(f.jsx)(u.Button,{disabled:!e,className:"btn-filled flyout-btn",design:"primary",size:"small",onClick:this.handleOkClick,"data-aid":O.a.MOVE_SECTION_OK_BUTTON,"data-traffic2":V.move_section_ok_button,text:Object(c.a)("moveSectionButton")}),Object(f.jsx)(u.Button,{className:l()({"btn pl-2":!n,"btn-filled flyout-btn":n}),size:"small",onClick:i,"data-aid":O.a.MOVE_SECTION_CANCEL_BUTTON,"data-traffic2":V.move_section_cancel_button,text:Object(c.a)("cancel")})]})]})}}o()(R,"contextType",J.b),o()(R,"defaultProps",{fullScreen:!1});t.a=Object(s.connect)(e=>({pages:Object(A.g)(e),maxWidgetsLimit:Object(B.g)(e,"limits.maxWidgets"),isMultipleAllowedPerType:Object(F.k)(e),currentPage:Object(A.b)(e),widgetsByPageId:Object(G.s)(e),isReseller:Object(_.k)(e)}))(R)},XZW0:function(e,t,i){"use strict";var n=i("fZO1");t.a=function(e,{show:t}){return e.dispatch({type:n.a.APP_TOGGLE_ADD_SECTION_BUTTON,payload:{show:t}}),Promise.resolve()}},XrNU:function(e,t,i){"use strict";var n=i("5lD2"),o=i("38OZ"),c=i("wqHn");const{REARRANGE_WIDGETS:a}=o.a;t.a=function(e,{navigation:t,hideHeaderFooter:i}){const o=i?t:t.slice(1,-1);return Object(n.isEqual)(Object(c.n)(e.getState()).toJS(),o)||e.dispatch({type:a,payload:{widgetIds:o}}),Promise.resolve()}},atyL:function(e,t,i){"use strict";const n=i("2X3e");e.exports=n("ellipses","true")},hjNj:function(e,t,i){"use strict";var n=i("AbpD"),o=i("+k5a"),c=i("lvcY"),a=i("OpJB"),s=i("38OZ"),d=i("kUj2"),l=i("t+uG");function r(e,{websiteId:t,pageId:i,widgetId:n}){return e.executeAction(d.a,{url:l.u,segments:{websiteId:t,pageId:i,widgetId:n},metadata:{type:c.a.GET_PAGE_WIDGET,param:n}})}var u=i("a8SQ");var g=function(e,{widgetId:t,pageId:i,websiteId:n,position:o}){const a=void 0===o?{}:{position:o},s={url:l.l,method:"post",segments:{websiteId:n,pageId:i,widgetId:t},metadata:{type:c.a.COPY_PAGE_WIDGET,param:t},params:a,reauthStatusCodes:[401]};return e.executeAction(d.a,s)},O=i("gU+0"),p=i("foj4");const{ADD_WIDGET:h}=s.a;t.a=Object(u.b)((function(e,{widgetId:t}){const i=e.getState().widget.pageWidgets.get(t);let c=null;const s=i.get("pageId"),d=i.get("websiteId");return e.executeAction(n.a).then(()=>e.executeAction(a.a,{query:{addWidgetId:t}})).then(()=>{const i=Object(p.t)(e.getState());return e.executeAction(g,{widgetId:t,pageId:s,websiteId:d,position:i})}).then(t=>(c=t,Promise.all([e.executeAction(o.a,{pageId:s}),e.executeAction(O.a)]))).then(()=>{if(!c)throw new Error("widget duplication failed for widgetId: "+t);return e.executeAction(r,{websiteId:d,pageId:s,widgetId:c}).then(t=>{e.dispatch({type:h,payload:{widget:t}})})}).then(()=>e.executeAction(a.a,{query:{scrollToWidgetId:String(c)}}).then(()=>c))}),c.a.COPY_PAGE_WIDGET)},lWMZ:function(e,t,i){}}]);
//# sourceMappingURL=https://blobby.test-wsimg.com/go/static/editor/section-manager-toolbar.fbd84bdc48cfa28e1c35.c.js.map